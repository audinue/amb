!function(){function e(e){return void 0===e||null===e?"":e}function n(e,n){if(!e||void 0===e.length)return e;for(var t=0,r=e.length;r>t&&n(e[t],t)!==!1;t++);return e}function t(e,t){var r=-1;return n(e,function(e,n){return e===t?(r=n,!1):void 0}),r}function r(e){var t=[];return n(e,function(e){t.push(e)}),t}function o(e,n){void 0!==e.textContent?e.textContent=n:e.innerText=n}function i(e,n,t){e.attachEvent?e.attachEvent("on"+n,t):e.addEventListener&&e.addEventListener(n,t,!1)}function a(e,n){return(" "+e.className+" ").indexOf(" "+n+" ")>-1}function u(e,n){a(e,n)||(e.className+=" "+n)}function c(e,n){a(e,n)&&(e.className=(" "+e.className+" ").replace(" "+n+" ","").replace(/^\s*/,"").replace(/\s*$/,""))}function f(e){if(!(e instanceof Object)||e.isObservable)return e;var r={};return e.isObservable=function(){},e.on=function(n,t){return void 0===r[n]&&(r[n]=[]),r[n].push(t),e},e.off=function(n,o){if(void 0===r[n])return e;var i=t(r[n],o);return i>-1&&r[n].splice(i,1),e},e.notify=function(t){return void 0===r[t.type]?e:(n(r[t.type].slice(0),function(e){e(t)}),e)},e}function l(e){return e instanceof Object&&!e.isChangeObservable?(f(e),e.isChangeObservable=function(){},e.prop=function(n,t){if(void 0===t){if("string"==typeof n)return e[n];for(var r in n)e.prop(r,n[r]);return e}return e[n]!==t&&(e[n]=t,e.notify({type:"change",key:n})),e},e.removeProp=function(n){return n in e&&(delete e[n],e.notify({type:"change",key:n})),e},e):e}function v(e){return e instanceof Object&&!e.isArrayObservable?(l(e),e.isArrayObservable=function(){},e.append=function(n){return e.push(n),e.notify({type:"append",value:n}).notify({type:"change",key:"length"})},e.prepend=function(n){return e.unshift(n),e.notify({type:"prepend",value:n}).notify({type:"change",key:"length"})},e.removeAt=function(n){if(n>-1&&n<e.length){var t=e[n];e.splice(n,1),e.notify({type:"remove",key:n,value:t}).notify({type:"change",key:"length"})}return e},e.each=function(n){return each(e,n)},e.keyOf=function(n){return t(e,n)},e.remove=function(n){var t=e.keyOf(n);return t>-1&&e.removeAt(t),e},e.clear=function(){for(var n=e.length;n-- >0;)e.removeAt(n);return e},e.reset=function(t){return e.clear(),n(t,function(n){e.append(n)}),e},e):e}function s(e,n){if(!(e instanceof Object))return e;if(e=e instanceof Array?v(e):l(e),n)for(var t in e)e[t]instanceof Function||(e[t]=s(e[t],n));return e}function p(e){var t=[];return n(e.split(/[\.\[\]]/),function(e){""!==e&&t.push(e)}),t}function d(e,t){function r(e){for(var n,t=a,r=a.object(),o=p(e);n=o.shift();)if("$root"!==n)if("$parent"!==n){if(!(r instanceof Object))return;if(void 0===r[n]){if(void 0===window[n])return;r=window}r=r[n]}else{if(!t.parent)return;t=t.parent,r=t.object()}else t=t.root(),r=t.object();return r}function o(e,n){var t=p(e),o=t.pop(),i=r(t.join("."));i instanceof Object&&(i.isChangeObservable?i.prop(o,n):i[o]=n)}function i(e){return"return("+e.replace(/(?:\)\.)?[a-z_$][a-z_$0-9]*(?:(?:\.[a-z_$][a-z_$0-9]*)|(?:\[\d+\]))*(\()?|['"](?:\\['"]|[^'"])*['"]/gi,function(e,n){return/^['"]|\)\./.test(e)?e:n?'s.valFn("'+e.substr(0,e.length-1)+'")(':'s.val("'+e+'")'})+")"}var a=this;a.parent=t,t||(a.templates={}),a.object=function(t){return arguments.length?(e=t,void n(u,function(n){n.observe(e)})):e},a.root=function(){if(!t)return a;for(var e=a;;){if(!e.parent)break;e=e.parent}return e},a.val=function(e,n){return void 0===n?r(e):(o(e,n),a)},a.valFn=function(e){var n=p(e),t=n.pop(),o=r(n.join("."));return o instanceof Object?function(){return o[t]instanceof Function?o[t].apply(o,arguments):void 0}:function(){}};var u=[];a.observe=function(n,t){u.push(new h(n,t).observe(e))},a.paths=function(e){var n=[];return e.replace(/(?:\)\.)?[a-z_$][a-z_$0-9]*(?:(?:\.[a-z_$][a-z_$0-9]*)|(?:\[\d+\]))*|['"](?:\\['"]|[^'"])*['"]/gi,function(e){/^['"]|\)\./.test(e)||n.push(e)}),n},a.observeExpr=function(e,t){var r=a.paths(e);return n(r,function(e){a.observe(e,t)}),a},a.compile=function(e){var n=new Function("s",i(e));return function(){return n(a)}}}function b(e,n){var t,r=this,o=function(r){r.key===e&&n.observe(t[e])};r.observe=function(r){t&&t.isChangeObservable&&t.off("change",o),t=r,t&&t.isChangeObservable&&t.on("change",o),n.observe(t?t[e]:void 0)}}function h(e,n){for(var t,r=this,o=p(e),i=new b(o.pop(),{observe:function(e){t?n(e):t=!0}});o.length;)i=new b(o.pop(),i);r.observe=function(e){return i.observe(e),r}}function y(e,n){return e.currentStyle?e.currentStyle[n]:window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(n):void 0}function m(e,n){return e.getAttribute?e.getAttribute("data-"+n):null}function g(e,n){e.removeAttribute&&e.removeAttribute("data-"+n)}function w(t,a){var f,l,v=!1,s=m(t,"with");if(null!==s){g(t,"with");var p=new d(a.val(s),a);return f=function(e){p.object(e)},a.observe(s,f),void w(t,p)}var b=m(t,"template");if(null!==b)return g(t,"template"),t.parentNode.removeChild(t),void(a.root().templates[b]=t);var h=m(t,"apply");if(null!==h)return g(t,"apply"),b=a.root().templates[h].cloneNode(!0),w(b,a),void t.parentNode.replaceChild(b,t);var C=m(t,"if");if(null!==C){g(t,"if"),l=a.compile(C);var O=t.parentNode,k=document.createComment(""),A=!0;f=function(){var e=!!l();A!==e&&(A=e,A?O.replaceChild(t,k):O.replaceChild(k,t))},a.observe(C,f),f()}var E=m(t,"foreach");if(null!==E){for(g(t,"foreach"),l=a.compile(E),b=document.createDocumentFragment();t.firstChild;)b.appendChild(t.firstChild);var j,x=function(e){var n=b.cloneNode(!0);w(n,new d(e,a)),t.appendChild(n)},N=function(e){x(e.value)},$=function(e){var n=b.cloneNode(!0);w(n,new d(e.value,a)),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},z=function(e){for(var n=b.childNodes.length,r=e.key*n,o=r+n,i=r;o>i;i++)t.removeChild(t.childNodes[r])};f=function(){var e=l();j&&j.isArrayObservable&&j.off("append",N).off("prepend",$).off("remove",z),j=e,j&&j.isArrayObservable&&j.on("append",N).on("prepend",$).on("remove",z),j instanceof Array&&n(e,x)},a.observeExpr(E,f),f(),v=!0}var _=m(t,"prop");null!==_&&(g(t,"prop"),_.replace(/\s*([^:]+)\s*:\s*([^;]+)\s*;?/g,function(e,n,r){var o=a.compile(r),i=function(){try{t[n]=o()}catch(e){}};a.observeExpr(r,i),i()}));var F=m(t,"style");null!==F&&(g(t,"style"),F.replace(/\s*([^:]+)\s*:\s*([^;]+)\s*;?/g,function(e,n,r){var o=a.compile(r),i=t.style,u=function(){try{i[n]=o()}catch(e){}};a.observeExpr(r,u),u()}));var S=m(t,"attr");null!==S&&(g(t,"attr"),S.replace(/\s*([^:]+)\s*:\s*([^;]+)\s*;?/g,function(n,r,o){var i=a.compile(o),u=function(){t.setAttribute(r,e(i()))};a.observeExpr(o,u),u()}));var T=m(t,"class");null!==T&&(g(t,"class"),T.replace(/\s*([^:]+)\s*:\s*([^;]+)\s*;?/g,function(e,n,r){var o=a.compile(r),i=function(){o()?u(t,n):c(t,n)};a.observeExpr(r,i),i()}));var L=m(t,"text");null!==L&&(g(t,"text"),l=a.compile(L),f=function(){o(t,e(l()))},a.observeExpr(L,f),f(),v=!0);var P=m(t,"visible");if(null!==P){g(t,"visible"),l=a.compile(P);var B=y(t,"display");f=function(){l()?t.style.display=B:t.style.display="none"},a.observeExpr(P,f),f(),v=!0}var D=m(t,"html");null!==D&&(g(t,"html"),l=a.compile(D),f=function(){t.innerHTML=e(l())},a.observeExpr(D,f),f(),v=!0);var H=m(t,"value");if(null!==H){g(t,"value");var M;f=function(){t.value!==M&&(M=t.value=e(a.val(H)))},a.observe(H,f),f();var R=function(){a.val(H,M=t.value)};i(t,"change",R),i(t,"keyup",R),"TEXTAREA"===t.nodeName&&(v=!0)}var V=m(t,"checked");if(null!==V){g(t,"checked");var X;f=function(){t.checked!==X&&(X=t.checked=a.val(V))},a.observe(V,f),f(),R=function(){a.val(V,X=t.checked)},i(t,"click",R),i(t,"change",R)}var q=m(t,"on");null!==q&&q.replace(/\s*([^:]+)\s*:\s*([^;]+)\s*;?/g,function(e,n,r){var o=function(e){a.valFn(r)(e||window.event,a.object())};i(t,n,o)}),v||n(r(t.childNodes),function(e){w(e,a)})}function C(e,n){void 0===n&&(n=document.documentElement),w(n,new d(e))}window.binding=window.b={convert:s,bind:C}}();